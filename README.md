
# Модель сегрегации Шеллинга

Этот проект реализует модель сегрегации Шеллинга с визуализацией процесса на каждом шаге. Код может быть запущен как локально в Python, так и в Google Colab.

## Описание

Модель сегрегации Шеллинга — это простая модель, которая иллюстрирует, как могут формироваться разделенные по признаку группы, даже если начальные предпочтения индивидов по соседям умеренные. В этой реализации мы имеем сетку, где каждая клетка может быть синей, красной или пустой. 

### Основные правила:
- **Сетка**: `n x n` с 45% синих клеток, 45% красных клеток и 10% пустых клеток.
- **Счастливые клетки**: Клетка "счастлива", если у неё есть 2 или более соседей одного цвета.
- **Моделирование**: Несчастливые клетки перемещаются на случайные пустые места до тех пор, пока все клетки не станут счастливы.

## Установка зависимостей

Для работы программы требуется Python и библиотека Matplotlib. Вы можете установить зависимости с помощью следующей команды:

```bash
pip install matplotlib
```

## Структура проекта

- `schelling_model.py`: основной файл с реализацией модели сегрегации Шеллинга.
- `README.md`: файл с инструкциями по использованию.

## Запуск программы

### 1. Локально в Python

1. Скачайте файл `schelling_model.py`.
2. Запустите файл командой:

   ```bash
   python schelling_model.py
   ```

3. Программа будет показывать сетку на каждом шаге моделирования. Если вы запускаете на сервере без интерфейса, изображения будут сохраняться автоматически.

### 2. В Google Colab

1. Загрузите `schelling_model.py` в вашу Google Colab среду.
2. Импортируйте и запустите функцию `run_simulation` из файла:

   ```python
   from schelling_model import run_simulation
   run_simulation(10)  # где 10 — количество шагов
   ```

## Пример

Каждый шаг иллюстрирует процесс сегрегации: синие и красные клетки перемещаются в пустые места, пока не будет достигнуто состояние, при котором все клетки удовлетворены своим положением.

## Параметры

- `n`: размер сетки, по умолчанию `50`.
- `blue_ratio`, `red_ratio`, `empty_ratio`: доли синих, красных и пустых клеток, которые можно изменять для тестирования разных сценариев.
- `num_steps`: количество шагов моделирования, по умолчанию `10`.

## Технические детали

### Определение среды исполнения

Код автоматически определяет, выполняется ли он в Google Colab или локально в Python, используя функцию `is_running_in_colab()`. В зависимости от этого, выбирается подходящий backend для Matplotlib:
- **Colab**: использует `module://matplotlib_inline.backend_inline`.
- **Локально**: если графический интерфейс доступен, используется `Qt5Agg` или `TkAgg`; иначе — `Agg`, который сохраняет изображения вместо отображения.

### Основные функции

- **initialize_grid**: создает сетку с заданными пропорциями синих, красных и пустых клеток.
- **is_happy**: проверяет, счастлива ли клетка, имея не менее 2 соседей одного цвета.
- **step**: выполняет один шаг моделирования, перемещая несчастливые клетки в случайные пустые места.
- **plot_grid**: отображает текущее состояние сетки.
